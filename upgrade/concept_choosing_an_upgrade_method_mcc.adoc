---
permalink: upgrade/concept_choosing_an_upgrade_method_mcc.html 
sidebar: sidebar 
keywords: metrocluster, upgrade, choose, upgrade, refresh, method 
summary: 您所使用的升級或更新程序取決於平台機型、升級範圍及MetroCluster 版本類型。 
---
= 選擇升級或重新整理方法
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
您所使用的升級或更新程序取決於平台機型、升級範圍及MetroCluster 版本類型。

升級與更新程序有不同類型。

* 升級程序僅適用於控制器模組。控制器將替換為新的控制器機型。
+
儲存櫃機型不會升級。

+
** 在切換和切換程序中、MetroCluster 使用「還原切換」作業來為用戶端提供不中斷營運的服務、同時升級合作夥伴叢集上的控制器模組。
** 在ARL型控制器升級程序中、集合體重新配置作業可用於不中斷營運地將資料從舊組態移至新的升級組態。


* 更新程序適用於控制器和儲存櫃。
+
在重新整理程序中、MetroCluster 系統會將新的控制器和磁碟櫃新增至該組態、建立第二個DR群組、然後將資料以不中斷營運的方式移轉至新節點。

+
然後、原始控制器就會淘汰。





== 支援使用切換和切換來升級控制器的平台組合

您可以使用切換和切換操作來升級特定平台。下表顯示支援哪些控制器升級組合：

image::supported_controller_upgrades.png[支援的控制器升級組合]



== 選擇不使用Aggregate重新配置的程序

|===


| 升級或更新類型 | 適用類型MetroCluster | 第一個ONTAP 支援版本 | 程序 


 a| 
* 範圍：僅平台（控制器模組）
* 方法：自動切換/切換

 a| 
FC
 a| 
9.10.1
 a| 
link:task_upgrade_controllers_system_control_commands_in_a_four_node_mcc_fc.html["使用MetroCluster 切換功能升級四節點的SFC組態中的控制器、並以「系統控制器更換」命令（ONTAP 版本號：E59.10.1及更新版本）進行切換。"]



 a| 
* 範圍：僅平台（控制器模組）
* 方法：自動切換/切換

 a| 
IP
 a| 
9.10.1
 a| 
link:task_upgrade_A700_to_A900_in_a_four_node_mcc_ip_us_switchover_and_switchback.html["使用交換器和切換功能、將控制器從AFF 功能性的2700升級至AFF 功能性的S還原MetroCluster IP組態（ONTAP 版本號：32、10.1及更新版本）"]



 a| 
* 範圍：僅平台（控制器模組）
* 方法：切換/切換

 a| 
FC
 a| 
9.8
 a| 
link:task_upgrade_controllers_in_a_four_node_fc_mcc_us_switchover_and_switchback_mcc_fc_4n_cu.html["使用MetroCluster 切換和切換功能升級採用SFC組態的控制器"]



 a| 
* 範圍：僅平台（控制器模組）
* 方法：切換/切換

 a| 
IP
 a| 
9.8
 a| 
link:task_upgrade_controllers_in_a_four_node_ip_mcc_us_switchover_and_switchback_mcc_ip.html["使用MetroCluster 切換和切換功能升級以使用靜態IP組態的控制器（ONTAP 版本號：S9.8及更新版本）"]



 a| 
* 範圍：平台（控制器模組）和儲存櫃
* 方法：展開MetroCluster 「資訊庫」組態、然後移除舊節點

 a| 
FC
 a| 
9.6及更新版本
 a| 
link:task_refresh_4n_mcc_fc.html["重新整理四節點MetroCluster 的不含功能的FC組態"]



 a| 
* 範圍：平台（控制器模組）和儲存櫃
* 方法：展開MetroCluster 「資訊庫」組態、然後移除舊節點

 a| 
IP
 a| 
9.8
 a| 
link:task_refresh_4n_mcc_ip.html["重新整理四節點MetroCluster 的靜態IP組態（ONTAP 不含更新版本的更新版本）"]

|===


== 使用Aggregate重新配置來選擇程序

|===
| Aggregate重新配置程序 | 適用類型MetroCluster | 第一個ONTAP 支援版本 | 程序 


 a| 
使用「系統控制器更換」命令、並交換控制器模組和NVM
 a| 
FC
 a| 
9.10.1及更新版本
 a| 
https://docs.netapp.com/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/index.html["使用「系統控制器更換」命令、將AFF 執行AFF 《E59.10.1 RC2》或更新版本的《ERA700》升級至《ERA900》ONTAP"^]



 a| 
使用「系統控制器置換」命令
 a| 
FC
 a| 
9.8及更新版本
 a| 
https://docs.netapp.com/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/index.html["使用「系統控制器更換」命令來升級執行ONTAP 《E9．8及更新版本》的控制器硬體"^]



 a| 
使用「系統控制器置換」命令
 a| 
FC
 a| 
9.5至9.7
 a| 
https://docs.netapp.com/us-en/ontap-systems-upgrade/upgrade-arl-auto/index.html["使用「系統控制器更換」命令、將執行ONTAP E9.5的控制器硬體升級至ONTAP E9.7"^]



 a| 
使用手動ARL命令
 a| 
FC
 a| 
9.8
 a| 
https://docs.netapp.com/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/index.html["手動升級執行ONTAP 效能不更新的控制器硬體"^]



 a| 
使用手動ARL命令
 a| 
FC
 a| 
9.7及更早版本
 a| 
https://docs.netapp.com/us-en/ontap-systems-upgrade/upgrade-arl-manual/index.html["手動升級執行ONTAP 效能為更新版本的控制器硬體"^]

|===